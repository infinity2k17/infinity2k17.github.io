(function(n,t){var i=n(t);n.fn.banner=function(r){var u=n.extend({},n.fn.banner.defaults,r);return this.each(function(){var e=n(this),y=e.find(u.tagSelector),b=u.width/u.height,f=[],h=[],c=[],s=0,r=-1,o,l,a;if(y.each(function(t,i){var r=n(i);f.push(u.imagePath+u.imagePrefix+r.data(u.dataAttrImage)+u.imageSuffix+u.imageExt);h.push(r.data(u.dataAttrCaption));c.push(r.data(u.dataAttrUrn))}),o=function(i){clearTimeout(s);r=r+(i||1);r>f.length-1&&(r=0);r<0&&(r=f.length-1);var l=f[r],v=h[r],a=c[r];l&&n.imgpreload(l,{all:function(){var n=e.find(u.tagSelector+":nth-child("+(r+1)+")"),i=e.find(u.tagSelector+":nth-child("+r+")"),h=n.find("div.caption");if(n.css("background-image","url("+l+")"),i.length&&(h.off("click.banner").removeClass("link"),i.off("click.banner").removeClass("link")),i.css({zIndex:1}),n.css({zIndex:10}),a)if(h.is(":visible"))h.addClass("link").on("click.banner",function(n){return n.preventDefault(),t.location.href=a,!1});else n.addClass("link").on("click.banner",function(n){return n.preventDefault(),t.location.href=a,!1});e.find(u.tagSelector+":not(:nth-child("+(r+1)+"))").stop().animate({opacity:0},u.transition);n.stop().animate({opacity:1},u.transition);u.autoPlay&&f.length>1&&(s=setTimeout(o,u.delay))}})},o(),l=function(n){return n.preventDefault(),clearTimeout(s),u.autoPlay=!1,o(),!1},a=function(n){return n.preventDefault(),clearTimeout(s),u.autoPlay=!1,o(-1),!1},u.navigation&&f.length>1){var v=n("<div/>",{"class":"navigation navigation-container"}),p=n("<a/>",{"class":"navigation navigation-previous",html:n("<span/>",{text:"Previous"}),href:"javascript:;"}).on("click",a),w=n("<a/>",{"class":"navigation navigation-next",html:n("<span/>",{text:"Next"}),href:"javascript:;"}).on("click",l);v.append(p).append(w);e.append(v)}(t.resize=function(){})();i.on("resize.banner load.banner",resize)})};n.fn.banner.defaults={width:1450,height:950,minHeight:300,maxHeight:2500,imagePath:"/images/home/",imagePrefix:"",imageSuffix:"",imageExt:".jpg",delay:5e3,transition:1500,tagSelector:"div.image",dataAttrImage:"image",dataAttrUrn:"link",dataAttrCaption:"caption",navigation:!0,autoPlay:!0}})(jQuery,window);